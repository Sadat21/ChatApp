(this.webpackJsonpchatappfrontend=this.webpackJsonpchatappfrontend||[]).push([[0],{108:function(e,n,t){e.exports=t(158)},113:function(e,n,t){},145:function(e,n){},158:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(7),o=t.n(c),i=(t(113),t(31)),l=t(14),u=t(15),s=t(195),m=t(186),f=t(187),d=t(185),p=t(40);function E(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -33%);\n  -webkit-transform: translate(-50%, -33%);\n"]);return E=function(){return e},e}function h(){var e=Object(l.a)(["\n  padding: 8px;\n"]);return h=function(){return e},e}function v(){var e=Object(l.a)(["\n  flex-direction: column;\n  overflow-y: auto;\n  display: flex;\n  height: calc(100vh - 56px - 16px);\n  width: calc(100% - 16px);\n  min-width: 72px;\n  margin: 8px;\n  vertical-align: top;\n"]);return v=function(){return e},e}function g(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  flex-grow: 1;\n"]);return g=function(){return e},e}function b(){var e=Object(l.a)(["\n  height: calc(100vh - 56px - 16px);\n  width: calc(100% - 16px);\n  min-width: 72px;\n  margin: 8px;\n  overflow: auto;\n  vertical-align: top;\n"]);return b=function(){return e},e}function y(){var e=Object(l.a)(["\n  width: 100%;\n  height: 56px;\n"]);return y=function(){return e},e}function O(){var e=Object(l.a)(["\n  height: calc(100vh - 56px);\n  display: flex;\n"]);return O=function(){return e},e}function j(){var e=Object(l.a)(["\n  width: 56px;\n  height: 100%;\n"]);return j=function(){return e},e}function k(){var e=Object(l.a)(["\n  width: calc(100% - 64px);\n  height: 100%;\n"]);return k=function(){return e},e}function w(){var e=Object(l.a)(["\n  overflow-x: auto;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n"]);return w=function(){return e},e}var x=u.a.div(w()),R=Object(u.a)(s.a)(k()),S=Object(u.a)(m.a)(j()),C=Object(u.a)(f.a)(O()),U=Object(u.a)(f.a)(y()),_=Object(u.a)(d.a)(b()),T=u.a.div(g()),A=Object(u.a)(d.a)(v()),N=Object(u.a)(p.a)(h()),P=u.a.div(E()),D=t(197),I=t(188),L=t(189),W=t(190),M=t(191),B=t(192),F=t(198),z=t(193),G=t(194),J=t(94),K=t.n(J),$=t(33),q=t(25),H=t(91),Q=t.n(H),V=t(49),X=t.n(V),Y=new(function(){function e(){Object($.a)(this,e),this.ENDPOINT="https://chatapp-73333.appspot.com",this.socket=void 0,this.socket=Q()(this.ENDPOINT),this.sendUserConnect()}return Object(q.a)(e,[{key:"sendUserConnect",value:function(){var e=X.a.get("user"),n="";e&&(n=e),this.socket.emit("user_connect",n)}},{key:"sendMessage",value:function(e){this.socket.emit("message",e)}},{key:"sendUserNameChange",value:function(e){this.socket.emit("username_change",e)}},{key:"sendColourChange",value:function(e){this.socket.emit("user_colour_change",e)}}]),e}()),Z=t(18),ee=function e(){Object($.a)(this,e),this.nickname="",this.colour=""},ne="UPDATE_USER",te="RESET_USER";var ae="UPDATE_ONLINE_USERS",re="RESET_ONLINE_USERS";var ce="UPDATE_MESSAGES",oe="RESET_MESSAGES";var ie="UPDATE_ERROR",le="RESET_ERROR";var ue=function(){var e=Object(Z.b)(),n=Y.socket;return Object(a.useEffect)((function(){n.on("reconnect",(function(){Y.sendUserConnect()})),n.on("disconnect",(function(){e({type:oe,messages:[]}),e({type:re,users:[]}),e({type:te,user:new ee})})),n.on("personal_info",(function(n){X.a.set("user",n.nickname),e({type:ne,user:n})})),n.on("global_info",(function(n){e({type:ae,users:n})})),n.on("message",(function(n){e(function(e){return{type:ce,messages:e}}(n))})),n.on("error_msg",(function(n){e({type:ie,error:n})}))}),[e,n]),r.a.createElement("div",null)},se=t(93);var me=function(){var e=Object(Z.b)(),n=Object(Z.c)((function(e){return e.userReducer})),t=Object(Z.c)((function(e){return e.onlineUserReducer})),c=Object(Z.c)((function(e){return Array.from(e.messageReducer).reverse()})),o=Object(Z.c)((function(e){return e.errorReducer})),l=Object(a.useState)(""),u=Object(i.a)(l,2),s=u[0],d=u[1],E=Object(a.useState)(""),h=Object(i.a)(E,2),v=h[0],g=h[1],b=Object(a.useState)(window.innerWidth>950),y=Object(i.a)(b,2),O=y[0],j=y[1],k=Object(a.useState)(!1),w=Object(i.a)(k,2),J=w[0],$=w[1];function q(){v.trim()&&("/nickcolour"===v.split(" ")[0]?Y.sendColourChange(v.split(" ")[1]):"/nick"===v.split(" ")[0]?Y.sendUserNameChange(v.split(" ")[1]):Y.sendMessage(v),g(""))}function H(){window.innerWidth<950?j(!1):j(!0)}return Object(a.useEffect)((function(){return window.addEventListener("resize",H),function(){window.removeEventListener("resize",H)}})),Object(a.useEffect)((function(){se.animateScroll.scrollToBottom({containerId:"chat-log",smooth:!0,duration:100,isDynamic:!0})})),Object(a.useEffect)((function(){o.length>0&&(d(o),e({type:le,error:""}),$(!0))}),[e,o]),r.a.createElement(x,null,r.a.createElement(ue,null),n.nickname&&Y.socket.connected?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{open:J},r.a.createElement(I.a,null,r.a.createElement(L.a,null,s)),r.a.createElement(W.a,null,r.a.createElement(m.a,{onClick:function(){$(!1)},color:"primary",variant:"outlined"},"Okay"))),r.a.createElement(C,{container:!0},r.a.createElement(f.a,{item:!0,xs:3,sm:2,md:3},r.a.createElement(_,{elevation:10},O?r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{variant:"h5"},"Profile"),r.a.createElement(M.a,null,r.a.createElement(B.a,null,r.a.createElement(F.a,{variant:"rounded",style:{backgroundColor:n.colour}},n.nickname[0])),O?r.a.createElement(z.a,{primary:n.nickname}):null),r.a.createElement(N,{variant:"h5"},"Online")):null,t.map((function(e,n){return r.a.createElement(M.a,{key:n},r.a.createElement(B.a,null,r.a.createElement(F.a,{variant:"rounded",style:{backgroundColor:e.colour}},e.nickname[0].toUpperCase())),O?r.a.createElement(z.a,{primary:e.nickname}):null)})))),r.a.createElement(f.a,{item:!0,xs:9,sm:10,md:9},r.a.createElement(A,{elevation:10,id:"chat-log"},r.a.createElement(T,null,c.map((function(e,t){return r.a.createElement(M.a,{key:t,alignItems:"flex-start",style:e.user.nickname===n.nickname?{textAlign:"right"}:{}},n.nickname!==e.user.nickname?r.a.createElement(B.a,null,r.a.createElement(F.a,{style:{backgroundColor:e.user.colour}},e.user.nickname[0].toUpperCase())):r.a.createElement("span",null),r.a.createElement(z.a,{primary:e.message,secondary:r.a.createElement(r.a.Fragment,null,new Date(e.timestamp).toLocaleString()+": ",r.a.createElement(p.a,{component:"span",variant:"body2",color:"textPrimary"},e.user.nickname))}))})))))),r.a.createElement(U,{container:!0},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(R,{variant:"outlined",value:v,onChange:function(e){return g(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&q()},placeholder:"Welcome "+n.nickname}),r.a.createElement(S,{variant:"contained",onClick:q,color:"primary"},r.a.createElement(K.a,null))))):r.a.createElement(P,null,r.a.createElement(G.a,{color:"primary"}),r.a.createElement(p.a,null,"Waiting for connection...")))},fe=t(95);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de,pe=t(29),Ee=t(96),he=Object(pe.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ee,n=arguments.length>1?arguments[1]:void 0;return n.type===ne||n.type===te?n.user:e},onlineUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return n.type===ae||n.type===re?Array.from(n.users):e},messageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return n.type===ce||n.type===oe?Array.from(n.messages):e},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===ie||n.type===le?n.error:e}}),ve=Object(Ee.createLogger)({collapsed:function(e,n,t){return t&&!t.error},predicate:function(){return!0},duration:!0,timestamp:!1,diff:!0}),ge=Object(pe.d)(he,Object(pe.a)(fe.a,ve));de=me,o.a.render(r.a.createElement(Z.a,{store:ge},r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[108,1,2]]]);
//# sourceMappingURL=main.99fd81c8.chunk.js.map